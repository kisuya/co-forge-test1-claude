# Retrospective: history-sharing-community

## Summary
2026-02-17 → 2026-02-17 | 27 sessions | 76 features completed

## Goal
서비스 완성 — 품질 보강, 이벤트 히스토리, 리포트 공유, 커뮤니티, 데일리 브리핑, 뉴스 피드, 트렌딩, 마켓 캘린더, 프로덕션 레이아웃/SEO/PWA까지 전 기능 구현.

## What Was Built
- **품질 보강** (8개): CORS 에러 헤더, API 에러 코드 정상화, 에러 포맷 표준화, DB 인덱싱, Redis 캐싱, 레이트 리밋, 입력 검증, 구조화 로깅
- **데이터 통합** (2개): Watchlist 시세 통합, 시세 신선도 관리
- **이벤트 히스토리** (6개): 히스토리 API, 종목 상세 페이지, 타임라인 UI, 페이지네이션, 종목 추가 토스트, 종목 상세 API
- **리포트 공유** (5개): SharedReport 모델, 공유 URL 생성, 비인증 조회, 공유 버튼 UI, 공유 페이지+만료 처리
- **사용자 프로필** (6개): 닉네임+프로필 API, 활동 통계, 마이페이지, 닉네임 편집, 비밀번호 변경, 활동 이력
- **커뮤니티** (6개): 토론 모델, CRUD API, 댓글 API, 목록/작성 UI, 수정/삭제 UI, 상세/댓글 UI
- **데일리 브리핑** (5개): 시장 데이터 수집, AI 생성, API, 대시보드 카드, 아카이브
- **뉴스 피드** (5개): 뉴스 수집, AI 요약/중요도, API, 페이지 UI, 대시보드 위젯
- **트렌딩** (4개): 트렌딩/인기 API, API 보강, UI 위젯, 전체 페이지
- **마켓 캘린더** (5개): 이벤트 모델, API, 월간 뷰, 대시보드 위젯, 추적 종목 하이라이트
- **글로벌 레이아웃** (16개): 타이포그래피, 디자인 토큰, 헤더, 모바일 네비, 랜딩, 푸터, 인증 리디자인, 알림 벨, 온보딩, SEO, 동적 타이틀, 스켈레톤, 404/에러, PWA, 접근성
- **인프라** (4개): 통합 E2E, 성능/보안, 최종 검증

## What Wasn't Built (and Why)
없음 — 76개 기능 전부 완료.

## What Went Well
- **하루 만에 76개 기능 완료**: 27세션 동안 속도와 일관성을 유지하며 전체 서비스를 완성. "갯수는 충분했다."
- **테스트 커버리지**: 1,096개 테스트(950 unit/structure + 146 e2e) 전부 통과
- **도메인별 체계적 진행**: quality → data → history → share → profile → community → briefing → news → trending → calendar → layout → infra 순서로 의존성을 존중하며 진행
- **백엔드-프론트엔드 분리 구현**: 백엔드 API 먼저 완성 후 프론트엔드 구현하는 패턴이 안정적으로 동작

## What Could Be Improved
- **레거시 코드 미정리**: 글로벌 헤더(ui-017) 추가 시 대시보드의 기존 레거시 헤더를 제거하지 않아 헤더가 2개 겹치는 버그 발생. 새 컴포넌트 추가 시 대체되는 기존 코드를 반드시 제거해야 함.
- **기능의 깊이 부족**: 76개를 넓게 구현했지만, 각 기능의 차별화 수준이 얕음. 특히 AI 분석이 서비스의 핵심 가치인데 단순 요약 수준에 머물러 있음. 유사 케이스 비교, 섹터 연쇄 영향, 시계열 패턴 분석 등 깊이 있는 분석이 필요.
- **샘플/시드 데이터 부재**: 개발 중 실제 데이터로 화면을 검증할 수 없어서, 완성 후에야 비로소 빈 상태만 확인. 시드 데이터를 미리 준비해두면 개발 중 즉시 검증 가능.
- **DB 마이그레이션 부재**: Alembic 마이그레이션 없이 create_all()로 테이블 생성하여, 컬럼 추가 시 기존 DB에 반영되지 않는 문제 발생.

## Harness Improvements
- **AGENTS.md에 규칙 추가 필요**: "새 글로벌 컴포넌트 추가 시, 대체되는 기존 컴포넌트를 반드시 제거하라"
- **시드 데이터 스크립트**: `.forge/scripts/seed_sample_data.sh` 같은 스크립트를 만들어서 개발/검증용 샘플 데이터를 원커맨드로 삽입할 수 있게 해야 함
- **features.json 깊이 지표**: 기능 description에 "차별화 포인트"나 "깊이 수준" 필드를 추가하여, 넓이만 쫓지 않도록 가이드

## Lessons for Next Project
- **넓이보다 깊이**: 기능 수를 줄이고, 각 기능의 완성도와 차별화에 집중. "갯수는 충분하나 깊이감이 부족. 차별화가 생기려면 깊이가 필요하다."
- **분석 차별화가 핵심**: AI 분석은 서비스의 존재 이유. 단순 뉴스 요약이 아니라, 유사 케이스 비교·섹터 연쇄·시계열 패턴 등 사용자가 직접 할 수 없는 분석을 제공해야 함.
- **테스트 데이터 선행 준비**: 시드 데이터를 프로젝트 초기에 만들어두고, 개발 중 재활용. 빈 상태 UI만 보며 개발하지 않기.
- **교체 시 제거 원칙**: 새 컴포넌트가 기존 컴포넌트를 대체하면, 기존 것을 반드시 삭제. "추가"만 하고 "제거"를 잊는 패턴 방지.
